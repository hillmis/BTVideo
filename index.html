<!DOCTYPE html>
<html lang="zh-CN">

<head>
    <link rel="stylesheet" href="like.css">
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>å…¨å±éšæœºè§†é¢‘-å±±é›¾ç§‹</title>
    <style>
        /* CSS é‡ç½® */
        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }

        /* æ ·å¼ä¿æŒä¸å˜ */
        body,
        html {
            height: 100%;
            overflow: hidden;
            font-family: Arial, sans-serif;
        }

        #videoContainer {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgb(0, 0, 0);
            display: flex;
            justify-content: center;
            align-items: center;
            -webkit-backdrop-filter: blur(10px);
            /* Safari */
            backdrop-filter: blur(10px);
        }

        video {
            max-width: 100%;
            max-height: 100%;
            object-fit: cover;
            top: 50%;
            left: 50%;
            -webkit-appearance: none;
            /* Safari */
            -moz-appearance: none;
            /* Firefox */
            appearance: none;
        }

        #popupContainer {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            display: flex;
            justify-content: center;
            align-items: center;
            background: rgba(0, 0, 0, 0.5);
            z-index: 100;
            opacity: 0;
            transition: opacity 0.3s ease, visibility 0.3s ease;
            visibility: hidden;
            will-change: opacity, visibility;
        }

        #popupContainer.show {
            opacity: 1;
            visibility: visible;
        }

        #popup {
            background: rgba(255, 255, 255, 0);
            padding: 20px;
            border-radius: 10px;
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 10px;
            text-align: center;
            transform: translateY(-20px);
            transition: transform 0.3s ease;
        }

        #popupContainer.show #popup {
            transform: translateY(0);
        }

        button,
        .typeButton {
            background: rgba(255, 255, 255, 0.3);
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 20px;
            cursor: pointer;
            font-weight: bold;
            font-size: clamp(10px, 1vw, 14px);
            backdrop-filter: blur(10px);
            -webkit-appearance: button;
            /* Safari */
            -moz-appearance: button;
            /* Firefox */
            appearance: button;
        }

        #loadingAnimation {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            z-index: 200;
        }

        #loadingAnimation.show {
            opacity: 0;
            visibility: hidden;
            transition: opacity 0.5s ease, visibility 0.5s ease;
        }

        #loadingAnimation {
            opacity: 1;
            visibility: visible;
        }

        .loader {
            border: 5px solid rgba(255, 255, 255, 0.3);
            border-top: 5px solid rgba(255, 255, 255, 1);
            border-radius: 50%;
            width: 40px;
            height: 40px;
            animation: spin 1s linear infinite;
        }

        @keyframes spin {
            0% {
                transform: rotate(0deg);
            }

            100% {
                transform: rotate(360deg);
            }
        }


        #nextVideoButton {
            position: fixed;
            top: 70%;
            left: 70%;
            transform: translateX(-50%);
            background: rgba(255, 255, 255, 0.3);
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 20px;
            cursor: pointer;
            font-weight: bold;
            font-size: clamp(12px, 1vw, 16px);
            backdrop-filter: blur(10px);
            z-index: 102;
        }



        @keyframes colorChange {
            0% {
                background-color: rgba(45, 199, 86, 0.556);
            }

            50% {
                background-color: rgba(51, 160, 197, 0.556);
            }

            100% {
                background-color: rgba(70, 62, 188, 0.671);
            }
        }

        #videoTitle {
            position: absolute;
            top: 10px;
            left: 50%;
            transform: translateX(-50%);
            font-size: 20px;
            font-weight: bold;
            color: white;
            text-shadow: 2px 2px 5px rgba(0, 0, 0, 0.7);
            z-index: 10;
            align-items: center;
            gap: 40px;
            justify-content: space-around;
            flex-wrap: nowrap;
            display: flex;
            white-space: nowrap;
        }

        .menu-item {
            flex: 1;
            text-align: center;
            padding: 10px;
            cursor: pointer;
            transition: background-color 0.3s;
            position: relative;
            color: rgba(255, 255, 255, 0.5);
        }

        .menu-item.active {
            color: white;
            text-shadow: 0 0 10px rgba(255, 255, 255, 0.3);
        }

        #sideButton,
        #favoriteButton,
        #downloadSideButton {
            position: fixed;
            right: 0;
            width: 40px;
            height: 40px;
            background-color: rgba(108, 108, 108, 0.43);
            color: white;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 24px;
            cursor: pointer;
            transition: right 0.5s ease, color 0.3s ease;
            z-index: 101;
        }

        #sideButton {
            top: 50%;
            transform: translateY(-50%);
        }

        #favoriteButton {
            top: 35%;
            transform: translateY(-50%);
            color: white;
        }

        #downloadSideButton {
            top: 65%;
            transform: translateY(-50%);
        }

        #sideButton.hidden,
        #favoriteButton.hidden,
        #downloadSideButton.hidden {
            right: -15px;
        }

        #notificationButton {
            position: fixed;
            top: 10%;
            /* è·ç¦»é¡¶éƒ¨25% */
            right: 10px;
            /* è·ç¦»å³ä¾§10px */
            z-index: 102;
            /* ä¿è¯æŒ‰é’®å±‚çº§è¾ƒé«˜ */
            font-size: clamp(10px, 0.9vw, 14px);
            color: white;
        }

        #pageDescription {
            background: rgba(255, 255, 255, 0);
            /* èƒŒæ™¯åŠé€æ˜ */
            border-radius: 10px;
            /* åœ†è§’ */
            margin-top: 10px;
            /* é¡¶éƒ¨é—´è· */
            padding: 15px;
            /* å†…è¾¹è· */
            font-weight: bold;
            line-height: 1.5;
            font-size: clamp(10px, 0.9vw, 13px);
        }

        .likeEffect {
            position: absolute;
            display: none;
            /* é»˜è®¤éšè— */
            transform: translate(-50%, -50%);
            z-index: 999;
            /* ç¡®ä¿åœ¨é¡¶éƒ¨ */
            pointer-events: none;
            /* é˜²æ­¢æ‹¦æˆªç‚¹å‡»äº‹ä»¶ */
        }

        /* ä¸º like-button æ·»åŠ å¿ƒè·³åŠ¨ç”» */
        .likeEffect like-button {
            display: inline-block;
            animation: heart-beat 1s infinite;
        }

        @keyframes heart-beat {

            0%,
            100% {
                transform: scale(1);
                /* æ­£å¸¸å¤§å° */
            }

            50% {
                transform: scale(1.5);
                /* æ”¾å¤§ */
            }
        }

        .likeEffect .star-1,
        .likeEffect .star-2,
        .likeEffect .star-3,
        .likeEffect .star-4,
        .likeEffect .star-5,
        .likeEffect .star-6 {
            animation: star-burst 1s ease-out forwards;
        }

        /* ä¿®æ”¹æ˜Ÿæ˜Ÿæ‰©å±•çš„åŠ¨ç”»æ•ˆæœ */
        @keyframes star-burst {
            0% {
                transform: scale(0.5) translate(0, 0);
                /* åˆå§‹ç¼©å°åœ¨åŸåœ° */
                opacity: 1;
            }

            50% {
                transform: scale(1.5) translate(-50px, -50px);
                /* ä¸­é—´ä½ç½®å‘å·¦ä¸Šæ‰©å±• */
                opacity: 0.8;
            }

            100% {
                transform: scale(2.5) translate(-100px, -100px);
                /* æœ€ç»ˆæ›´å¤§ï¼Œå¹¶åç§»æ›´è¿œ */
                opacity: 0;
                /* å®Œå…¨æ¶ˆå¤± */
            }
        }

        /* è°ƒæ•´æ¯é¢—æ˜Ÿæ˜Ÿçš„ä½ç½®å’Œæ–¹å‘ */
        .likeEffect .star-1 {
            transform-origin: center;
        }

        .likeEffect .star-2 {
            transform-origin: center;
            animation-delay: 0.1s;
            /* å»¶è¿Ÿä¸€ç‚¹æ—¶é—´ */
        }

        .likeEffect .star-3 {
            transform-origin: center;
            animation-delay: 0.2s;
        }

        .likeEffect .star-4 {
            transform-origin: center;
            animation-delay: 0.3s;
        }

        .likeEffect .star-5 {
            transform-origin: center;
            animation-delay: 0.4s;
        }

        .likeEffect .star-6 {
            transform-origin: center;
            animation-delay: 0.5s;
        }

        #favoriteList {
            position: fixed;
            top: 0;
            right: -100%;
            width: 300px;
            height: 100%;
            background: rgba(0, 0, 0, 0.9);
            padding: 20px;
            box-sizing: border-box;
            transition: right 0.3s ease;
            z-index: 1000;
            overflow-y: auto;
        }

        #favoriteList.show {
            right: 0;
        }

        #favoriteList h3 {
            color: white;
            text-align: center;
            margin-bottom: 20px;
            font-size: clamp(12px, 1.1vw, 16px);
        }

        .favorite-item {
            background: rgba(255, 255, 255, 0.1);
            margin: 8px;
            padding: 12px;
            border-radius: 10px;
            color: white;
            display: flex;
            align-items: center;
            transition: all 0.3s ease;
        }

        .favorite-item button {
            background: none;
            border: none;
            color: white;
            cursor: pointer;
            font-size: 18px;
            padding: 5px 10px;
            margin-left: 10px;
            border-radius: 5px;
            transition: background-color 0.3s;
        }

        .favorite-item button:hover {
            background: rgba(255, 255, 255, 0.2);
        }

        .favorite-title {
            font-size: clamp(10px, 0.9vw, 14px);
            margin-right: 10px;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
        }

        .favorite-buttons {
            display: flex;
            align-items: center;
        }

        /* æ·»åŠ åª’ä½“æŸ¥è¯¢ä»¥ä¼˜åŒ–ç§»åŠ¨è®¾å¤‡æ˜¾ç¤º */
        @media screen and (max-width: 768px) {

            button,
            .typeButton {
                padding: 8px 15px;
                font-size: clamp(10px, 3vw, 12px);
            }

            #videoTitle {
                font-size: clamp(12px, 3.5vw, 16px);
            }

            .favorite-title {
                font-size: clamp(10px, 3vw, 12px);
            }

            #pageDescription {
                font-size: clamp(10px, 2.8vw, 12px);
            }
        }

        @media screen and (max-width: 480px) {

            button,
            .typeButton {
                padding: 6px 12px;
                font-size: clamp(10px, 3.2vw, 12px);
            }

            #videoTitle {
                font-size: clamp(12px, 3.8vw, 14px);
            }
        }

        /* æ·»åŠ åŠ¨ç”»æ•ˆæœ */
        @keyframes slideIn {
            0% {
                transform: translateX(-100%);
                opacity: 0;
            }

            100% {
                transform: translateX(0);
                opacity: 1;
            }
        }

        @keyframes slideOut {
            0% {
                transform: translateX(0);
                opacity: 1;
            }

            100% {
                transform: translateX(100%);
                opacity: 0;
            }
        }

        /* è§†é¢‘ç±»å‹æŒ‰é’®çš„æ ·å¼ */
        #videoTypes {
            display: none;
            /* åˆå§‹éšè— */
            animation: slideIn 0.5s forwards;
            /* æ·»åŠ è¿›å…¥åŠ¨ç”» */
        }

        #videoTypes.hide {
            animation: slideOut 0.5s forwards;
            /* æ·»åŠ é€€å‡ºåŠ¨ç”» */
        }

        /* æ–°çš„æ‚¬æµ®çª—å£æ ·å¼ */
        #videoTypePopup {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            display: flex;
            justify-content: center;
            align-items: center;
            background: rgba(0, 0, 0, 0);
            /* ä¿®æ”¹ä¸ºé€æ˜ */
            z-index: 100;
            opacity: 0;
            visibility: hidden;
            will-change: opacity;
        }

        #videoTypePopup.show {
            opacity: 1;
            visibility: visible;
        }

        #videoTypeContent {
            background: rgba(0, 0, 0, 0);
            padding: 20px;
            border-radius: 10px;
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 10px;
            text-align: center;
        }

        /* æ·»åŠ è¿›åº¦æ¡æ ·å¼ */
        #progressContainer {
            position: absolute;
            bottom: 10px;
            /* è·ç¦»åº•éƒ¨10px */
            left: 0;
            /* å·¦å¯¹é½ */
            width: 100%;
            /* è¿›åº¦æ¡å®½åº¦ä¸º100% */
            height: 3px;
            /* è¿›åº¦æ¡é«˜åº¦ */
            background-color: rgba(255, 255, 255, 0.3);
            /* èƒŒæ™¯è‰² */
            border-radius: 10px;
            /* åœ†è§’ */
            overflow: hidden;
            /* éšè—æº¢å‡ºéƒ¨åˆ† */
        }

        #progressBar {
            height: 100%;
            /* è¿›åº¦æ¡é«˜åº¦ */
            background-color: var(--progress-bar-color-default);
            /* ä½¿ç”¨å˜é‡ */
            /* é»˜è®¤è¿›åº¦æ¡é¢œè‰² */
            width: 0%;
            /* åˆå§‹å®½åº¦ä¸º0 */
            transition: width 0.1s;
            /* åŠ¨ç”»æ•ˆæœ */
        }

        /* å…¨å±€å˜é‡å®šä¹‰ */
        :root {
            --text-color-default: white;
            --icon-color-default: white;
            /* é»˜è®¤å›¾æ ‡é¢œè‰² */
            --background-color-default: white;
            --progress-bar-color-default: white;
            /* é»˜è®¤è¿›åº¦æ¡é¢œè‰² */

            --text-color-pink: #ff69b4;
            --icon-color-pink: #ff69b4;
            /* ç²‰è‰²ä¸»é¢˜å›¾æ ‡é¢œè‰² */
            --background-color-pink: #ffe6f2;
            --progress-bar-color-pink: #ff69b4;
            /* ç²‰è‰²ä¸»é¢˜è¿›åº¦æ¡é¢œè‰² */

            --text-color-cyan: #00bcd4;
            --icon-color-cyan: #00bcd4;
            /* é’è‰²ä¸»é¢˜å›¾æ ‡é¢œè‰² */
            --background-color-cyan: #e0f7fa;
            --progress-bar-color-cyan: #00bcd4;
            /* é’è‰²ä¸»é¢˜è¿›åº¦æ¡é¢œè‰² */
        }

        /* åº”ç”¨å…¨å±€å˜é‡ */
        #progressBar {
            height: 100%;
            /* è¿›åº¦æ¡é«˜åº¦ */
            background-color: var(--progress-bar-color-default);
            /* ä½¿ç”¨å˜é‡ */
            /* é»˜è®¤è¿›åº¦æ¡é¢œè‰² */
            width: 0%;
            /* åˆå§‹å®½åº¦ä¸º0 */
            transition: width 0.1s;
            /* åŠ¨ç”»æ•ˆæœ */
        }

        /* æ·»åŠ å›¾æ ‡é¢œè‰²çš„ CSS å˜é‡ */
        :root {
            --icon-color-default: white;
            /* é»˜è®¤å›¾æ ‡é¢œè‰² */
            --icon-color-pink: #ff69b4;
            /* ç²‰è‰²ä¸»é¢˜å›¾æ ‡é¢œè‰² */
            --icon-color-cyan: #00bcd4;
            /* é’è‰²ä¸»é¢˜å›¾æ ‡é¢œè‰² */
        }

        /* åº”ç”¨å›¾æ ‡é¢œè‰² */
        #sideButton,
        #favoriteButton,
        #downloadSideButton {
            color: var(--icon-color-default);
            /* ä½¿ç”¨å˜é‡ */
        }

        /* ä¸»é¢˜åˆ‡æ¢æ—¶æ›´æ–°å›¾æ ‡é¢œè‰² */
        body.pink #sideButton,
        body.pink #favoriteButton,
        body.pink #downloadSideButton {
            color: var(--icon-color-pink);
        }

        body.cyan #sideButton,
        body.cyan #favoriteButton,
        body.cyan #downloadSideButton {
            color: var(--icon-color-cyan);
        }

        /* å¹¿å‘Šå¼¹çª—æ ·å¼ */
        .ad-popup {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0);
            /* ä¿®æ”¹æ­¤è¡Œä»¥ä½¿é®ç½©é€æ˜ */
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 300;
            /* ç¡®ä¿åœ¨è§†é¢‘ä¸Šæ–¹ */
            opacity: 0;
            /* åˆå§‹é€æ˜åº¦ */
            visibility: hidden;
            /* åˆå§‹éšè— */
            transition: opacity 0.3s ease, visibility 0.3s ease, transform 0.5s ease;
            transform: translateY(100%);
            /* åˆå§‹ä½ç½®åœ¨å±å¹•ä¸‹æ–¹ */
        }

        .ad-popup.show {
            opacity: 1;
            /* æ˜¾ç¤ºæ—¶çš„é€æ˜åº¦ */
            visibility: visible;
            /* æ˜¾ç¤ºæ—¶å¯è§ */
            transform: translateY(0);
            /* æ˜¾ç¤ºæ—¶å›åˆ°æ­£å¸¸ä½ç½® */
        }

        .ad-content {
            background: rgba(255, 255, 255, 0);
            /* æ¸å˜èƒŒæ™¯ */
            color: var(--text-color-default);
            /* ä½¿ç”¨å…¨å±€å˜é‡ */
            padding: 30px;
            /* å¢åŠ å†…è¾¹è· */
            border-radius: 15px;
            /* åœ†è§’ */
            text-align: center;

            max-width: 400px;
            /* æœ€å¤§å®½åº¦ */
            width: 90%;
            /* è‡ªé€‚åº”å®½åº¦ */
        }

        .ad-image {
            width: 150px;
            /* å›ºå®šå®½åº¦ */
            height: 150px;
            /* å›ºå®šé«˜åº¦ï¼Œç¡®ä¿ä¸ºæ­£æ–¹å½¢ */
            border-radius: 10px;
            /* åœ†è§’ */
            margin-bottom: 10px;
            /* åº•éƒ¨é—´è· */
        }

        #closeAdPopup {
            margin-top: 15px;
            /* å¢åŠ é¡¶éƒ¨é—´è· */
            border: none;
            font-size: 20px;
            cursor: pointer;
            color: rgb(255, 255, 255);
            /* ç™½è‰²å­—ä½“ */
            padding: 10px 15px;
            /* å¢åŠ å†…è¾¹è· */
            border-radius: 5px;
            /* åœ†è§’ */
        }
    </style>
</head>

<body>
    <!-- æ·»åŠ é€æ˜é®ç½© -->
    <div id="overlay"
        style="display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0, 0, 0, 0); z-index: 99;">
    </div>
    <!-- å¹¿å‘Šå¼¹çª— -->
    <div id="adPopup" class="ad-popup">
        <div class="ad-content">
            <img src="https://s3.bmp.ovh/imgs/2024/09/08/1e157341b7c62420.jpg" alt="å¹¿å‘Šå›¾åƒ" class="ad-image">
            <p>
                <a href="https://s3.bmp.ovh/imgs/2024/09/08/1e157341b7c62420.jpg" target="_blank"
                    style="color: var(--text-color-default);">
                    ç‚¹å‡»è¿™é‡Œäº†è§£æ›´å¤šä¿¡æ¯ï¼
                </a>
            </p>
            <button id="closeAdPopup">3</button> <!-- ä¿®æ”¹æ­¤è¡Œä»¥æ˜¾ç¤ºåˆå§‹å€’è®¡æ—¶ -->
        </div>
    </div>
    <div id="sideButton" onclick="togglePopup(true)">ğŸ’ </div>
    <div id="favoriteButton" onclick="handleFavorite()">â˜…</div>
    <div id="downloadSideButton">â¬‡</div>
    <button id="notificationButton" style="font-size: 14px" class="typeButton" disabled>é€šçŸ¥</button>
    <div id="videoContainer">
        <button id="nextVideoButton" data-hint="ä¸‹ä¸€ä¸ªè§†é¢‘æ¥å’¯" style="display: none;">åˆ‡æ¢ä¸‹ä¸€ä¸ªè§†é¢‘</button>
        <video id="player" autoplay></video>
        <div id="progressContainer">
            <div id="progressBar"></div>
        </div>
        <div id="videoTitle">
            <span id="randomVideoBtn" class="menu-item active" onclick="switchToRandom()">æ¨è</span>
            <span id="showFavoriteListBtn" class="menu-item" onclick="switchToFavorites()">æ”¶è—</span>
            <span id="videoTypeBtn" class="menu-item" onclick="toggleVideoTypePopup()">åˆ†ç±»</span>
        </div>
        <div id="videoTypes" style="display: none;">
            <button class="typeButton" data-api="http://www.yujn.cn/api/zzxjj.php?type=video">å°å§å§</button>
            <button class="typeButton" data-api="http://www.yujn.cn/api/yuzu.php?type=video">é’°è¶³</button>
            <button class="typeButton" data-api="http://www.yujn.cn/api/tianmei.php?type=video">ç”œå¦¹</button>
            <button class="typeButton" data-api="http://www.yujn.cn/api/jksp.php?type=video">jkæ´›ä¸½å¡”</button>
            <button class="typeButton" data-api="http://www.yujn.cn/api/ndym.php?type=video">ä½ çš„æ¬²æ¢¦</button>
            <button class="typeButton" data-api="http://www.yujn.cn/api/sbkl.php?type=video">åŒå€å¿«ä¹</button>
            <button class="typeButton" data-api="http://www.yujn.cn/api/rewu.php?type=video">çƒ­èˆç³»åˆ—</button>
            <button class="typeButton" data-api="http://www.yujn.cn/api/luoli.php?type=video">èè‰ç³»åˆ—</button>
            <button class="typeButton" data-api="http://www.yujn.cn/api/shejie.php?type=video">è›‡å§ç³»åˆ—</button>
            <button class="typeButton" data-api="http://www.yujn.cn/api/hanfu.php?type=video">æ±‰æœç³»åˆ—</button>
            <button class="typeButton" data-api="http://www.yujn.cn/api/manyao.php?type=video">æ…¢æ‘‡ç³»åˆ—</button>
            <button class="typeButton" data-api="http://www.yujn.cn/api/diaodai.php?type=video">åŠå¸¦ç³»åˆ—</button>
            <button class="typeButton" data-api="http://www.yujn.cn/api/qingchun.php?type=video">æ¸…çº¯ç³»åˆ—</button>
            <button class="typeButton" data-api="http://www.yujn.cn/api/COS.php?type=video">COSç³»åˆ—</button>
            <button class="typeButton" data-api="http://www.yujn.cn/api/nvgao.php?type=video">çº¯æƒ…å¥³é«˜</button>
            <button class="typeButton" data-api="http://www.yujn.cn/api/jiepai.php?type=video">è¡—æ‹ç³»åˆ—</button>
            <button class="typeButton" data-api="http://www.yujn.cn/api/manzhan.php?type=video">æ¼«å±•è§†é¢‘</button>
            <button class="typeButton" data-api="http://www.yujn.cn/api/lyy.php?type=video">æ‡’æ´‹æ´‹</button>
            <button class="typeButton" data-api="http://www.yujn.cn/api/wmsc.php?type=video">å®Œç¾èº«æ</button>
            <button class="typeButton" data-api="http://www.yujn.cn/api/shwd.php?type=video">ä¸æ»‘èˆè¹ˆ</button>
            <button class="typeButton" data-api="http://www.yujn.cn/api/chuanda.php?type=video">ç©¿æ­ç³»åˆ—</button>
            <button class="typeButton" data-api="http://www.yujn.cn/api/jjy.php?type=video">é å©§ç¥</button>
            <button class="typeButton" data-api="http://www.yujn.cn/api/zrn.php?type=video">ç« è‹¥æ¥ </button>
            <button class="typeButton" data-api="http://api.yujn.cn/api/heisis.php?type=video">é»‘ä¸ç³»åˆ—</button>
        </div>
        <div id="popupContainer">
            <div id="popup">
                <!-- ç½‘é¡µä»‹ç»åŒºåŸŸ -->
                <div id="pageDescription"
                    style="grid-column: span 3; text-align: center; padding: 10px; color: white; font-size: 13px;">
                    è¿™é‡Œæ˜¯å±±é›¾ç§‹åˆ¶ä½œçš„è§†é¢‘æ’­æ”¾é¡µï¼Œé‡‡ç”¨äº†å…è´¹APIæµ‹è¯•åŠŸèƒ½ï¼Œæœ‰ä»»ä½•é—®é¢˜å¯ä»¥è”ç³»ä½œè€…180782569ã€‚
                </div>
                <button id="autoplayToggle" data-hint="è‡ªåŠ¨è¿æ’­" style="font-size: 14px">è¿æ’­ï¼šå¼€</button>
                <button id="themeToggle" data-hint="åˆ‡æ¢ä¸»é¢˜" style="font-size: 14px">ä¸»é¢˜ï¼šé»˜è®¤</button>
                <button id="muteButton" data-hint="é™éŸ³å—ï¼Ÿ" style="font-size: 14px">é™éŸ³ï¼šå…³</button>
                <div style="grid-column: span 3; text-align: center; font-size: 12px;">
                    <a href="https://mein.rth5.com/" target="_blank">
                        <button class="typeButton">å°å±</button>
                    </a>
                </div>
                <!-- ç½‘é¡µç‰ˆæƒåŒºåŸŸ -->
                <div id="pageDescription"
                    style="grid-column: span 3; text-align: center; padding: 10px; color: rgb(222, 164, 50); font-size: 13px;">
                    <a href="http://home.liu13.fun" target="_blank"
                        style="text-decoration: none; color: rgb(222, 164, 50);">Â©å±±é›¾ç§‹</a>
                </div>
            </div>
        </div>
        <div id="loadingAnimation" style="display: none;">
            <div class="loader"></div>
        </div>
    </div>
    <div class="likeEffect" id="likeEffect">
        <div class="star-1">
            <svg xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 784.11 815.53"
                style="shape-rendering:geometricPrecision; text-rendering:geometricPrecision; image-rendering:optimizeQuality; fill-rule:evenodd; clip-rule:evenodd"
                version="1.1" xml:space="preserve" xmlns="http://www.w3.org/2000/svg">
                <defs></defs>
                <g id="Layer_x0020_1">
                    <metadata id="CorelCorpID_0Corel-Layer"></metadata>
                    <path
                        d="M392.05 0c-20.9,210.08 -184.06,378.41 -392.05,407.78 207.96,29.37 371.12,197.68 392.05,407.74 20.93,-210.06 184.09,-378.37 392.05,-407.74 -207.98,-29.38 -371.16,-197.69 -392.06,-407.78z"
                        class="fil0"></path>
                </g>
            </svg>
        </div>
        <div class="star-2">
            <svg xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 784.11 815.53"
                style="shape-rendering:geometricPrecision; text-rendering:geometricPrecision; image-rendering:optimizeQuality; fill-rule:evenodd; clip-rule:evenodd"
                version="1.1" xml:space="preserve" xmlns="http://www.w3.org/2000/svg">
                <use href="#Layer_x0020_1" />
            </svg>
        </div>
        <div class="star-3">
            <svg xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 784.11 815.53"
                style="shape-rendering:geometricPrecision; text-rendering:geometricPrecision; image-rendering:optimizeQuality; fill-rule:evenodd; clip-rule:evenodd"
                version="1.1" xml:space="preserve" xmlns="http://www.w3.org/2000/svg">
                <use href="#Layer_x0020_1" />
            </svg>
        </div>
        <div class="star-4">
            <svg xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 784.11 815.53"
                style="shape-rendering:geometricPrecision; text-rendering:geometricPrecision; image-rendering:optimizeQuality; fill-rule:evenodd; clip-rule:evenodd"
                version="1.1" xml:space="preserve" xmlns="http://www.w3.org/2000/svg">
                <use href="#Layer_x0020_1" />
            </svg>
        </div>
        <div class="star-5">
            <svg xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 784.11 815.53"
                style="shape-rendering:geometricPrecision; text-rendering:geometricPrecision; image-rendering:optimizeQuality; fill-rule:evenodd; clip-rule:evenodd"
                version="1.1" xml:space="preserve" xmlns="http://www.w3.org/2000/svg">
                <use href="#Layer_x0020_1" />
            </svg>
        </div>
        <div class="star-6">
            <svg xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 784.11 815.53"
                style="shape-rendering:geometricPrecision; text-rendering:geometricPrecision; image-rendering:optimizeQuality; fill-rule:evenodd; clip-rule:evenodd"
                version="1.1" xml:space="preserve" xmlns="http://www.w3.org/2000/svg">
                <use href="#Layer_x0020_1" />
            </svg>
        </div>
        <div class="star-7">
            <svg xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 784.11 815.53"
                style="shape-rendering:geometricPrecision; text-rendering:geometricPrecision; image-rendering:optimizeQuality; fill-rule:evenodd; clip-rule:evenodd"
                version="1.1" xml:space="preserve" xmlns="http://www.w3.org/2000/svg">
                <use href="#Layer_x0020_1" />
            </svg>
        </div>
        <div class="star-8">
            <svg xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 784.11 815.53"
                style="shape-rendering:geometricPrecision; text-rendering:geometricPrecision; image-rendering:optimizeQuality; fill-rule:evenodd; clip-rule:evenodd"
                version="1.1" xml:space="preserve" xmlns="http://www.w3.org/2000/svg">
                <use href="#Layer_x0020_1" />
            </svg>
        </div>
    </div>
    <div id="favoriteList">
        <h3>æ”¶è—åˆ—è¡¨</h3>
        <div id="favoriteListContent"></div>
    </div>
    <div id="videoTypePopup" class="popupContainer">
        <div id="videoTypeContent">
            <button class="typeButton" data-api="http://www.yujn.cn/api/zzxjj.php?type=video">å°å§å§</button>
            <button class="typeButton" data-api="http://www.yujn.cn/api/yuzu.php?type=video">é’°è¶³</button>
            <button class="typeButton" data-api="http://www.yujn.cn/api/tianmei.php?type=video">ç”œå¦¹</button>
            <button class="typeButton" data-api="http://www.yujn.cn/api/jksp.php?type=video">jkæ´›ä¸½å¡”</button>
            <button class="typeButton" data-api="http://www.yujn.cn/api/ndym.php?type=video">ä½ çš„æ¬²æ¢¦</button>
            <button class="typeButton" data-api="http://www.yujn.cn/api/sbkl.php?type=video">åŒå€å¿«ä¹</button>
            <button class="typeButton" data-api="http://www.yujn.cn/api/rewu.php?type=video">çƒ­èˆç³»åˆ—</button>
            <button class="typeButton" data-api="http://www.yujn.cn/api/luoli.php?type=video">èè‰ç³»åˆ—</button>
            <button class="typeButton" data-api="http://www.yujn.cn/api/shejie.php?type=video">è›‡å§ç³»åˆ—</button>
            <button class="typeButton" data-api="http://www.yujn.cn/api/hanfu.php?type=video">æ±‰æœç³»åˆ—</button>
            <button class="typeButton" data-api="http://www.yujn.cn/api/manyao.php?type=video">æ…¢æ‘‡ç³»åˆ—</button>
            <button class="typeButton" data-api="http://www.yujn.cn/api/diaodai.php?type=video">åŠå¸¦ç³»åˆ—</button>
            <button class="typeButton" data-api="http://www.yujn.cn/api/qingchun.php?type=video">æ¸…çº¯ç³»åˆ—</button>
            <button class="typeButton" data-api="http://www.yujn.cn/api/COS.php?type=video">COSç³»åˆ—</button>
            <button class="typeButton" data-api="http://www.yujn.cn/api/nvgao.php?type=video">çº¯æƒ…å¥³é«˜</button>
            <button class="typeButton" data-api="http://www.yujn.cn/api/jiepai.php?type=video">è¡—æ‹ç³»åˆ—</button>
            <button class="typeButton" data-api="http://www.yujn.cn/api/manzhan.php?type=video">æ¼«å±•è§†é¢‘</button>
            <button class="typeButton" data-api="http://www.yujn.cn/api/lyy.php?type=video">æ‡’æ´‹æ´‹</button>
            <button class="typeButton" data-api="http://www.yujn.cn/api/wmsc.php?type=video">å®Œç¾èº«æ</button>
            <button class="typeButton" data-api="http://www.yujn.cn/api/shwd.php?type=video">ä¸æ»‘èˆè¹ˆ</button>
            <button class="typeButton" data-api="http://www.yujn.cn/api/chuanda.php?type=video">ç©¿æ­ç³»åˆ—</button>
            <button class="typeButton" data-api="http://www.yujn.cn/api/jjy.php?type=video">é å©§ç¥</button>
            <button class="typeButton" data-api="http://www.yujn.cn/api/zrn.php?type=video">ç« è‹¥æ¥ </button>
            <button class="typeButton" data-api="http://api.yujn.cn/api/heisis.php?type=video">é»‘ä¸ç³»åˆ—</button </div>
        </div>
        <script>
            const player = document.getElementById('player');
            const popupContainer = document.getElementById('popupContainer');
            let muted = false;
            let currentAPI = 'http://www.yujn.cn/api/zzxjj.php?type=video';
            let longPressTimer, touchStartY, touchEndY;
            let isScrolling = false;
            let currentAnimatingButton = null;
            let auto = true; // é»˜è®¤å¼€å¯è‡ªåŠ¨è¿æ’­
            let currentVideoURL = ''; // è®°å½•å½“å‰æ­£åœ¨æ’­æ”¾çš„è§†é¢‘URL
            let favorites = JSON.parse(localStorage.getItem('videoFavorites') || '[]');
            let videoPlayCount = 0; // åˆå§‹åŒ–è§†é¢‘æ’­æ”¾è®¡æ•°å™¨

            // å®šä¹‰ bind å‡½æ•°ç”¨äºæ·»åŠ äº‹ä»¶ç›‘å¬å™¨
            function bind(element, event, callback) {
                element.addEventListener(event, callback);
            }

            // ä¿®æ”¹è‡ªåŠ¨è¿æ’­æŒ‰é’®çš„ç‚¹å‡»äº‹ä»¶
            bind(document.getElementById('autoplayToggle'), 'click', function () {
                auto = !auto;
                this.innerText = 'è¿æ’­ï¼š' + (auto ? 'å¼€' : 'å…³');
            });

            // å½“è§†é¢‘æ’­æ”¾ç»“æŸæ—¶ï¼Œæ ¹æ®è‡ªåŠ¨è¿æ’­çŠ¶æ€å†³å®šæ˜¯å¦å¾ªç¯æ’­æ”¾
            bind(player, 'ended', function () {
                if (auto) {
                    // å¦‚æœè‡ªåŠ¨è¿æ’­å¼€å¯ï¼ŒåŠ è½½ä¸‹ä¸€ä¸ªè§†é¢‘
                    loadVideo(currentAPI);
                }
            });

            // ä¿®æ”¹loadVideoå‡½æ•°
            function loadVideo(api) {
                player.src = `${api}&t=${Math.random()}`;
                currentVideoURL = player.src;

                player.onloadeddata = () => {
                    checkFavoriteStatus();
                    updateProgressBar(); // åˆå§‹åŒ–è¿›åº¦æ¡
                    videoPlayCount++; // æ¯æ¬¡åŠ è½½è§†é¢‘æ—¶å¢åŠ è®¡æ•°å™¨

                    // æ¯æ’­æ”¾10ä¸ªè§†é¢‘æ˜¾ç¤ºå¹¿å‘Š
                    if (videoPlayCount % 10 === 0) {
                        showAdPopup(); // æ˜¾ç¤ºå¹¿å‘Š
                    }
                };

                player.onerror = () => {
                    console.error('Video loading error:', player.error);
                    currentVideoURL = '';
                    showNotification('è§†é¢‘åŠ è½½å¤±è´¥ï¼Œå°è¯•ä¸‹ä¸€ä¸ª...');
                    if (auto) {
                        setTimeout(() => loadVideo(api), 1000);
                    }
                };

                player.onloadedmetadata = () => {
                    player.play();
                };
            }

            // æ›´æ–°è¿›åº¦æ¡
            function updateProgressBar() {
                const progressBar = document.getElementById('progressBar');
                const duration = player.duration;

                function update() {
                    if (!isNaN(duration)) {
                        const currentTime = player.currentTime;
                        const percentage = (currentTime / duration) * 100;
                        progressBar.style.width = percentage + '%';
                    }
                    requestAnimationFrame(update); // ä½¿ç”¨ requestAnimationFrame è¿›è¡Œå¹³æ»‘æ›´æ–°
                }

                update(); // å¯åŠ¨æ›´æ–°å¾ªç¯

                // æ·»åŠ ç‚¹å‡»äº‹ä»¶ä»¥æ§åˆ¶è§†é¢‘æ’­æ”¾æ—¶é—´
                progressBar.parentElement.addEventListener('click', (event) => {
                    const rect = progressBar.parentElement.getBoundingClientRect();
                    const offsetX = event.clientX - rect.left; // è·å–ç‚¹å‡»ä½ç½®ç›¸å¯¹äºè¿›åº¦æ¡çš„åç§»é‡
                    const percentage = offsetX / rect.width; // è®¡ç®—ç‚¹å‡»ä½ç½®çš„ç™¾åˆ†æ¯”
                    player.currentTime = percentage * duration; // æ›´æ–°è§†é¢‘æ’­æ”¾æ—¶é—´
                });

                // æ·»åŠ æ‹–åŠ¨äº‹ä»¶ä»¥æ§åˆ¶è§†é¢‘æ’­æ”¾æ—¶é—´
                let isDragging = false;

                const onMouseMove = (event) => {
                    if (isDragging) {
                        const rect = progressBar.parentElement.getBoundingClientRect();
                        const offsetX = event.clientX - rect.left; // è·å–æ‹–åŠ¨ä½ç½®ç›¸å¯¹äºè¿›åº¦æ¡çš„åç§»é‡
                        const percentage = Math.min(Math.max(offsetX / rect.width, 0), 1); // ç¡®ä¿ç™¾åˆ†æ¯”åœ¨0åˆ°1ä¹‹é—´
                        player.currentTime = percentage * duration; // æ›´æ–°è§†é¢‘æ’­æ”¾æ—¶é—´
                    }
                };

                const onMouseUp = () => {
                    isDragging = false;
                    document.removeEventListener('mousemove', onMouseMove);
                    document.removeEventListener('mouseup', onMouseUp);
                };

                progressBar.parentElement.addEventListener('mousedown', (event) => {
                    isDragging = true;
                    onMouseMove(event); // ç«‹å³æ›´æ–°ä¸€æ¬¡
                    document.addEventListener('mousemove', onMouseMove);
                    document.addEventListener('mouseup', onMouseUp);
                });

                // è§¦æ‘¸äº‹ä»¶å¤„ç†
                progressBar.parentElement.addEventListener('touchstart', (event) => {
                    isDragging = true;
                    onMouseMove(event.touches[0]); // ç«‹å³æ›´æ–°ä¸€æ¬¡
                });

                progressBar.parentElement.addEventListener('touchmove', (event) => {
                    if (isDragging) {
                        onMouseMove(event.touches[0]);
                    }
                });

                progressBar.parentElement.addEventListener('touchend', () => {
                    isDragging = false;
                });
            }

            // ç¡®ä¿è¿›åº¦æ¡å®½åº¦éšè§†é¢‘å®¹å™¨å˜åŒ–
            window.addEventListener('resize', () => {
                const progressContainer = document.getElementById('progressContainer');
                progressContainer.style.width = document.getElementById('videoContainer').clientWidth + 'px';
            });

            // å¤„ç†æ”¶è—åŠŸèƒ½
            function handleFavorite() {
                const videoElement = document.querySelector('video');
                if (!videoElement || !videoElement.src) {
                    showNotification('æ— æ³•è·å–è§†é¢‘åœ°å€ï¼');
                    return;
                }

                const videoUrl = videoElement.src;
                // è·å–å½“å‰è§†é¢‘çš„æ ‡é¢˜ï¼ˆä½¿ç”¨APIåç§°ä½œä¸ºæ ‡é¢˜ï¼‰
                const activeButton = document.querySelector('.typeButton[data-api="' + currentAPI + '"]');
                const videoTitle = activeButton ? activeButton.textContent : 'æœªçŸ¥è§†é¢‘';

                const index = favorites.findIndex(item => item.url === videoUrl);
                if (index === -1) {
                    // æ·»åŠ åˆ°æ”¶è—
                    favorites.push({
                        url: videoUrl,
                        title: videoTitle,
                        date: new Date().toLocaleString()
                    });
                    document.getElementById('favoriteButton').style.color = '#ffd700';
                    showNotification('å·²æ·»åŠ åˆ°æ”¶è—ï¼');
                } else {
                    // å–æ¶ˆæ”¶è—
                    favorites.splice(index, 1);
                    document.getElementById('favoriteButton').style.color = 'white';
                    showNotification('å·²å–æ¶ˆæ”¶è—ï¼');
                }
                localStorage.setItem('videoFavorites', JSON.stringify(favorites));
                updateFavoriteList();
            }

            // æ˜¾ç¤ºé€šçŸ¥çš„å‡½æ•°
            function showNotification(message) {
                const notificationButton = document.getElementById('notificationButton');
                notificationButton.textContent = message;
                notificationButton.style.display = 'block';

                clearTimeout(hideNotificationTimeout);
                hideNotificationTimeout = setTimeout(() => {
                    notificationButton.style.display = 'none';
                }, 3000);
            }

            // æ£€æŸ¥å½“å‰è§†é¢‘æ˜¯å¦å·²æ”¶è—
            function checkFavoriteStatus() {
                const favoriteButton = document.getElementById('favoriteButton');
                const videoElement = document.querySelector('video');

                if (!videoElement || !videoElement.src) {
                    favoriteButton.style.color = 'white';
                    return;
                }

                const videoUrl = videoElement.src;
                const isInFavorites = favorites.some(item => item.url === videoUrl);
                favoriteButton.style.color = isInFavorites ? '#ffd700' : 'white';
            }

            document.addEventListener('touchstart', e => handleTouch(e, true));
            document.addEventListener('touchend', e => handleTouch(e, false));


            document.getElementById('muteButton').onclick = () => {
                muted = !muted;
                player.muted = muted;
                document.getElementById('muteButton').textContent = muted ? 'é™éŸ³ï¼šå¼€' : 'é™éŸ³ï¼šå…³';
            };

            // ç±»å‹æŒ‰é’®ç‚¹å‡»å¤„ç†
            document.querySelectorAll('.typeButton').forEach(button => {
                button.onclick = () => {
                    currentAPI = button.dataset.api;
                    loadVideo(currentAPI);
                    togglePopup(false);
                    startColorAnimation(button);
                };
            });

            // é¢œè‰²åŠ¨ç”»
            function startColorAnimation(button) {
                if (currentAnimatingButton) stopColorAnimation();
                currentAnimatingButton = button;
                button.style.animation = 'colorChange 0.5s infinite alternate';
            }

            function stopColorAnimation() {
                if (currentAnimatingButton) currentAnimatingButton.style.animation = '';
                currentAnimatingButton = null;
            }

            // åˆ‡æ¢è§†é¢‘æŒ‰é’®ï¼ˆä»…æ¡Œé¢ï¼‰
            document.getElementById('nextVideoButton').onclick = () => loadVideo(currentAPI);

            document.getElementById('randomVideoBtn').onclick = () => {
                location.reload();
            };

            // æ˜¾ç¤ºåˆ‡æ¢æŒ‰é’®äºæ¡Œé¢
            if (window.innerWidth > 800) {
                document.getElementById('nextVideoButton').style.display = 'block';
            }
            const swipeThreshold = 50; // æ»‘åŠ¨è·ç¦»é˜ˆå€¼ï¼Œç”¨äºåˆ¤æ–­æ˜¯å¦ä¸ºæœ‰æ•ˆæ»‘åŠ¨

            // å¼€å§‹è§¦æ‘¸ï¼Œè®°å½•èµ·å§‹ä½ç½®
            document.addEventListener('touchstart', function (e) {
                touchStartY = e.changedTouches[0].screenY;
            });

            // ç»“æŸè§¦æ‘¸ï¼Œåˆ¤æ–­æ»‘åŠ¨æ–¹å‘å¹¶åˆ‡æ¢è§†é¢‘
            document.addEventListener('touchend', function (e) {
                touchEndY = e.changedTouches[0].screenY;
                const swipeDistance = touchStartY - touchEndY;

                // åˆ¤æ–­æ˜¯å¦è¾¾åˆ°æ»‘åŠ¨è·ç¦»é˜ˆå€¼
                if (Math.abs(swipeDistance) > swipeThreshold) {
                    if (swipeDistance > 0) {
                        // å‘ä¸Šæ»‘åŠ¨ï¼Œåˆ‡æ¢åˆ°ä¸‹ä¸€ä¸ªè§†é¢‘
                        loadVideo(currentAPI); // æ ¹æ®éœ€è¦æ›¿æ¢ä¸ºåŠ è½½ä¸‹ä¸€ä¸ªè§†é¢‘çš„ API åœ°å€
                    } else {
                        // å‘ä¸‹æ»‘åŠ¨ï¼Œåˆ‡æ¢åˆ°ä¸Šä¸€ä¸ªè§†é¢‘æˆ–é‡æ–°åŠ è½½å½“å‰è§†é¢‘
                        loadVideo(currentAPI); // æ ¹æ®éœ€è¦æ›¿æ¢ä¸ºåŠ è½½ä¸Šä¸€ä¸ªè§†é¢‘çš„ API åœ°å€
                    }
                }
            });
            function togglePopup(show) {
                popupContainer.classList.toggle('show', show);
            }

            // ç‚¹å‡»å¼¹çª—å¤–éƒ¨å…³é—­å¼¹çª—
            popupContainer.addEventListener('click', function (e) {
                if (e.target === popupContainer) {
                    togglePopup(false);
                }
            });

            // ç›‘å¬æ•´ä¸ªæ–‡æ¡£çš„è§¦æ‘¸ç§»åŠ¨äº‹ä»¶ï¼Œç”¨äºåˆ¤æ–­æ˜¯å¦ä¸ºæœ‰æ•ˆæ»‘åŠ¨
            bind(document, 'touchmove', function (e) {
                const touchMoveY = e.touches[0].screenY;
                const diffY = Math.abs(touchStartY - touchMoveY);
                const diffX = Math.abs(e.touches[0].screenX - touchStartX);
                if (diffY > 10 && diffX < diffY) {
                    isScrolling = true;
                }
            });
            // è§¦æ‘¸å¼€å§‹äº‹ä»¶ï¼Œè®¾ç½®é•¿æŒ‰è®¡æ—¶å™¨
            // document.addEventListener('touchstart', function (e) {
            //     longPressTimer = setTimeout(showPopup, longPressDuration);
            // });

            // è§¦æ‘¸ç»“æŸäº‹ä»¶ï¼Œæ¸…é™¤é•¿æŒ‰è®¡æ—¶å™¨
            // document.addEventListener('touchend', function () {
            //     clearTimeout(longPressTimer);
            // });

            // è§¦æ‘¸ç§»åŠ¨äº‹ä»¶ï¼Œå¦‚æœç”¨æˆ·ç§»åŠ¨æ‰‹æŒ‡ï¼Œå–æ¶ˆé•¿æŒ‰è®¡æ—¶å™¨
            // document.addEventListener('touchmove', function () {
            //     clearTimeout(longPressTimer);
            // });

            // é¼ æ ‡é•¿æŒ‰æ”¯æŒï¼ˆç”¨äºéè§¦å±è®¾å¤‡ï¼‰
            // document.addEventListener('mousedown', function () {
            //     longPressTimer = setTimeout(showPopup, longPressDuration);
            // });

            // é¼ æ ‡æ¾å¼€æˆ–ç¦»å¼€è§†é¢‘æ—¶æ¸…é™¤è®¡æ—¶å™¨
            // document.addEventListener('mouseup', function () {
            //     clearTimeout(longPressTimer);
            // });
            // document.addEventListener('mouseleave', function () {
            //     clearTimeout(longPressTimer);
            // });

            const sideButton = document.getElementById('sideButton');
            let buttonTimeout;

            // ä¼˜åŒ–è‡ªåŠ¨éšè—æŒ‰é’®é€»è¾‘
            function startHideButtonTimer() {
                clearTimeout(buttonTimeout); // æ¸…é™¤ä¹‹å‰çš„è®¡æ—¶å™¨
                buttonTimeout = setTimeout(() => {
                    sideButton.classList.add('hidden'); // åŠé®æŒ‰é’®
                }, 3000); // 3ç§’åéšè—
            }

            // ç‚¹å‡»æŒ‰é’®æ˜¾ç¤ºæˆ–å…³é—­å¼¹çª—
            sideButton.onclick = () => {
                if (popupContainer.classList.contains('show')) {
                    // å¦‚æœå¼¹çª—å·²æ‰“å¼€ï¼Œå…³é—­å¼¹çª—å¹¶éšè—æŒ‰é’®
                    togglePopup(false);
                    sideButton.classList.add('hidden'); // éšè—æŒ‰é’®
                } else {
                    // å¦‚æœå¼¹çª—æœªæ‰“å¼€ï¼Œæ‰“å¼€å¼¹çª—å¹¶æ˜¾ç¤ºæŒ‰é’®
                    togglePopup(true);
                    sideButton.classList.remove('hidden'); // æ˜¾ç¤ºæŒ‰é’®
                    startHideButtonTimer(); // é‡å¯è®¡æ—¶å™¨
                }
            };


            // é¼ æ ‡æˆ–è§¦æ‘¸äº‹ä»¶è§¦å‘æ—¶ï¼Œé‡ç½®è®¡æ—¶å™¨
            document.addEventListener('mousemove', startHideButtonTimer);
            document.addEventListener('touchstart', startHideButtonTimer);

            const notificationButton = document.getElementById('notificationButton');
            const notifications = [
                "æ¬¢è¿æ¥åˆ°æˆ‘ä»¬çš„å¹³å°ï¼",
                "æ–°çš„è§†é¢‘å·²ç»ä¸Šçº¿ï¼Œå¿«æ¥è§‚çœ‹å§ï¼",
                "è®°å¾—ç‚¹å‡»è‡ªåŠ¨è¿æ’­æŒ‰é’®ï¼Œè®©ç²¾å½©ä¸åœæ­‡ï¼",
                "ç‚¹å‡»å±å¹•å³ä¾§çš„æŒ‰é’®å¯ä»¥åˆ‡æ¢è§†é¢‘ç±»å‹ã€‚",
                "å–œæ¬¢æˆ‘ä»¬çš„å¹³å°å—ï¼Ÿé‚£å°±åˆ†äº«ç»™èº«è¾¹çš„äººå§ï¼",
                "éœ€è¦å¸®åŠ©ï¼Ÿç‚¹å‡»å±å¹•å³ä¾§çš„è®¾ç½®æŒ‰é’®è·å–å¸®åŠ©ã€‚"
            ];
            let currentNotificationIndex = 0;
            let notificationInterval;
            let hideNotificationTimeout;
            let resetNotificationTimeout;

            // ä¼˜åŒ–è‡ªåŠ¨æ›´æ–°é€šçŸ¥å†…å®¹çš„å‡½æ•°
            function updateNotification() {
                notificationButton.textContent = notifications[currentNotificationIndex];
                notificationButton.style.display = 'block';
                currentNotificationIndex = (currentNotificationIndex + 1) % notifications.length;

                clearTimeout(hideNotificationTimeout);
                hideNotificationTimeout = setTimeout(() => {
                    notificationButton.style.display = 'none';
                }, 3000); // 3ç§’åéšè—
            }

            // ç‚¹å‡»æŒ‰é’®æ—¶æ˜¾ç¤ºç‰¹å®šæç¤º
            document.querySelectorAll('.typeButton').forEach(button => {
                button.addEventListener('click', () => {
                    // è·å–æŒ‰é’®çš„ç‰¹å®šæç¤º
                    const hint = button.getAttribute('data-hint');

                    // ç«‹å³æ˜¾ç¤ºæç¤ºå†…å®¹
                    notificationButton.textContent = hint;
                    notificationButton.style.display = 'block';

                    // æ¸…é™¤è‡ªåŠ¨é€šçŸ¥å’Œéšè—å®šæ—¶å™¨
                    clearTimeout(hideNotificationTimeout);
                    clearInterval(notificationInterval);

                    // 3ç§’åæ¢å¤è‡ªåŠ¨é€šçŸ¥æ›´æ–°
                    clearTimeout(resetNotificationTimeout);
                    resetNotificationTimeout = setTimeout(() => {
                        notificationInterval = setInterval(updateNotification, 5000); // æ¢å¤è‡ªåŠ¨åˆ‡æ¢
                        updateNotification(); // ç«‹å³æ¢å¤è‡ªåŠ¨é€šçŸ¥
                    }, 3000);
                });
            });

            // æ¯éš”5ç§’è‡ªåŠ¨æ›´æ–°é€šçŸ¥å†…å®¹
            notificationInterval = setInterval(updateNotification, 10000);
            updateNotification();

            // è§†é¢‘æ’­æ”¾å™¨å•å‡»å’ŒåŒå‡»äº‹ä»¶å¤„ç†
            const likeEffect = document.getElementById('likeEffect');
            const videoPlayer = document.getElementById('player');

            let singleClickTimeout = null; // ç”¨äºåŒºåˆ†å•å‡»å’ŒåŒå‡»

            // æ˜¾ç¤ºåŠ¨ç”»æ•ˆæœçš„å‡½æ•°
            function showLikeEffect(x, y, isRemoving = false) {
                const likeEffect = document.getElementById('likeEffect');

                // è®¾ç½®å®¹å™¨å¤§å°å’Œä½ç½®ï¼Œä½¿ç”¨å±å¹•ä¸­å¿ƒ
                likeEffect.style.width = '400px';
                likeEffect.style.height = '400px';
                likeEffect.style.left = '74%';
                likeEffect.style.top = '74%';
                likeEffect.style.transform = 'translate(-50%, -50%)';
                likeEffect.style.display = 'block';

                // ç§»é™¤ä¹‹å‰çš„æ‰€æœ‰ç±»
                likeEffect.classList.remove('scatter', 'gather');

                // è®¡ç®—8ä¸ªæ–¹å‘çš„ä½ç½®
                const radius = Math.min(window.innerWidth, window.innerHeight) * 0.3; // æ ¹æ®å±å¹•å¤§å°è°ƒæ•´æ•£å¼€åŠå¾„
                const stars = likeEffect.children;
                for (let i = 0; i < stars.length; i++) {
                    const angle = (i * Math.PI * 2) / stars.length;
                    const tx = Math.cos(angle) * radius;
                    const ty = Math.sin(angle) * radius;
                    stars[i].style.setProperty('--tx', `${tx}px`);
                    stars[i].style.setProperty('--ty', `${ty}px`);

                    // è®¾ç½®åŠ¨ç”»å»¶è¿Ÿï¼Œåˆ›é€ æ³¢æµªæ•ˆæœ
                    const delay = isRemoving ? i * 0.1 : (stars.length - i - 1) * 0.1;
                    stars[i].style.animationDelay = `${delay}s`;
                }

                // æ·»åŠ æ–°çš„åŠ¨ç”»ç±»
                likeEffect.classList.add(isRemoving ? 'scatter' : 'gather');

                // åŠ¨ç”»ç»“æŸåéšè—
                setTimeout(() => {
                    likeEffect.style.display = 'none';
                    likeEffect.classList.remove('scatter', 'gather');
                    Array.from(stars).forEach(star => {
                        star.style.animationDelay = '0s';
                    });
                }, 2500);
            }

            // å•å‡»é€»è¾‘ï¼ˆæ’­æ”¾/æš‚åœï¼‰
            function handleSingleClick() {
                if (videoPlayer.paused) {
                    videoPlayer.play();
                } else {
                    videoPlayer.pause();
                }
            }

            // åŒå‡»é€»è¾‘ï¼ˆè§¦å‘åŠ¨ç”»å’Œæ”¶è—ï¼‰
            function handleDoubleClick(event) {
                // æ£€æŸ¥å½“å‰è§†é¢‘æ˜¯å¦å·²æ”¶è—
                const videoElement = document.querySelector('video');
                const videoUrl = videoElement?.src;
                const isCurrentlyFavorited = favorites.some(item => item.url === videoUrl);

                showLikeEffect(0, 0, isCurrentlyFavorited); // åæ ‡å‚æ•°ä¸å†ä½¿ç”¨
                handleFavorite();
            }

            // ç»Ÿä¸€åŒå‡»é€»è¾‘
            videoPlayer.addEventListener('click', (event) => {
                if (singleClickTimeout) {
                    clearTimeout(singleClickTimeout);
                    singleClickTimeout = null;
                    handleDoubleClick(event);
                } else {
                    singleClickTimeout = setTimeout(() => {
                        handleSingleClick();
                        singleClickTimeout = null;
                    }, 300);
                }
            });

            // æ·»åŠ è§¦æ‘¸äº‹ä»¶å¤„ç†
            videoPlayer.addEventListener('touchend', (event) => {
                const now = Date.now();
                if (now - lastTouchTime < 300) {
                    // è§¦å‘åŒå‡»é€»è¾‘
                    handleDoubleClick(event);
                }
                lastTouchTime = now;
            });

            // è‡ªåŠ¨éšè—æŒ‰é’®
            function startHideButtonTimer() {
                clearTimeout(buttonTimeout);
                const buttons = [sideButton, favoriteButton, downloadSideButton];
                buttonTimeout = setTimeout(() => {
                    buttons.forEach(button => button.classList.add('hidden'));
                }, 3000);
            }

            // æ˜¾ç¤ºæŒ‰é’®
            function showButtons() {
                const buttons = [sideButton, favoriteButton, downloadSideButton];
                buttons.forEach(button => button.classList.remove('hidden'));
                startHideButtonTimer();
            }

            // æ›´æ–°äº‹ä»¶ç›‘å¬å™¨
            document.addEventListener('mousemove', showButtons);
            document.addEventListener('touchstart', showButtons);

            const favoriteList = document.getElementById('favoriteList');
            const showFavoriteListBtn = document.getElementById('showFavoriteListBtn');
            const favoriteListContent = document.getElementById('favoriteListContent');

            // æ˜¾ç¤º/éšè—æ”¶è—åˆ—è¡¨
            showFavoriteListBtn.onclick = () => {
                favoriteList.classList.toggle('show');
                overlay.style.display = favoriteList.classList.contains('show') ? 'block' : 'none'; // æ˜¾ç¤ºæˆ–éšè—é®ç½©
                if (favoriteList.classList.contains('show')) {
                    updateFavoriteList();
                }
            };

            // ç‚¹å‡»é®ç½©å…³é—­æ”¶è—åˆ—è¡¨
            overlay.onclick = () => {
                favoriteList.classList.remove('show');
                overlay.style.display = 'none'; // éšè—é®ç½©
                // åˆ‡æ¢å›éšæœºè§†é¢‘çš„æ¿€æ´»çŠ¶æ€
                document.getElementById('randomVideoBtn').classList.add('active');
                document.getElementById('showFavoriteListBtn').classList.remove('active');
            };

            // æ›´æ–°æ”¶è—åˆ—è¡¨
            function updateFavoriteList() {
                favoriteListContent.innerHTML = '';

                if (favorites.length === 0) {
                    favoriteListContent.innerHTML = `
                    <div style="text-align: center; color: white; padding: 20px;">
                        æš‚æ— æ”¶è—è§†é¢‘
                        <div style="font-size: 12px; color: #999; margin-top: 10px;">
                            åŒå‡»è§†é¢‘æˆ–ç‚¹å‡»æ˜Ÿæ ‡æ·»åŠ æ”¶è—
                        </div>
                    </div>`;
                    return;
                }

                // æ·»åŠ æœç´¢æ¡†
                const searchBox = document.createElement('div');
                searchBox.innerHTML = `
                <div style="padding: 10px; margin-bottom: 10px;">
                    <input type="text" id="favoriteSearch" placeholder="æœç´¢æ”¶è—..." 
                        style="width: 100%; padding: 8px; border-radius: 15px; border: none; 
                        background: rgba(255, 255, 255, 0.1); color: white; outline: none;">
                </div>
            `;
                favoriteListContent.appendChild(searchBox);

                // æ·»åŠ æ’åºé€‰é¡¹
                const sortOptions = document.createElement('div');
                sortOptions.innerHTML = `
                <div style="padding: 0 10px 10px 10px; display: flex; justify-content: space-between;">
                    <select id="sortFavorites" 
                        style="padding: 5px; border-radius: 10px; border: none; 
                        background: rgba(255, 255, 255, 0.1); color: white; outline: none;">
                        <option value="newest">æœ€æ–°æ”¶è—</option>
                        <option value="oldest">æœ€æ—©æ”¶è—</option>
                    </select>
                    <button onclick="clearAllFavorites()" 
                        style="padding: 5px 10px; border-radius: 10px; border: none; 
                        background: rgba(255, 0, 0, 0.3); color: white; cursor: pointer;">
                        æ¸…ç©ºæ”¶è—
                    </button>
                    <span style="color: #999; font-size: 12px;">å…± ${favorites.length} ä¸ªæ”¶è—</span>
                </div>
            `;
                favoriteListContent.appendChild(sortOptions);

                // åˆ›å»ºæ”¶è—åˆ—è¡¨å®¹å™¨
                const listContainer = document.createElement('div');
                listContainer.id = 'favoriteItemsContainer';
                listContainer.style.maxHeight = '70vh';
                listContainer.style.overflowY = 'auto';
                favoriteListContent.appendChild(listContainer);

                // æ¸²æŸ“æ”¶è—é¡¹ç›®
                function renderFavorites(items) {
                    listContainer.innerHTML = '';
                    items.forEach((item, index) => {
                        const favoriteItem = document.createElement('div');
                        favoriteItem.className = 'favorite-item';

                        // è®¡ç®—æ”¶è—æ—¶é—´
                        const timeAgo = getTimeAgo(new Date(item.date));

                        favoriteItem.innerHTML = `
                        <div style="flex: 1;">
                            <div class="favorite-title">${item.title}</div>
                            <div style="font-size: 11px; color: #999; margin-top: 4px;">
                                æ”¶è—äº ${timeAgo}
                            </div>
                        </div>
                        <div class="favorite-buttons">
                            <button onclick="playFavorite('${item.url}')" title="æ’­æ”¾" 
                                style="background: none; border: none; color: white; cursor: pointer; padding: 5px;">
                                â–¶ï¸
                            </button>
                            <button onclick="downloadFavorite('${item.url}')" title="ä¸‹è½½" 
                                style="background: none; border: none; color: white; cursor: pointer; padding: 5px;">
                                â¬‡ï¸
                            </button>
                            <button onclick="removeFavorite(${index})" title="åˆ é™¤" 
                                style="background: none; border: none; color: white; cursor: pointer; padding: 5px;">
                                ğŸ—‘ï¸
                            </button>
                        </div>
                    `;
                        listContainer.appendChild(favoriteItem);
                    });
                }

                // åˆå§‹æ¸²æŸ“
                renderFavorites(favorites);

                // æœç´¢åŠŸèƒ½
                const searchInput = document.getElementById('favoriteSearch');
                searchInput.addEventListener('input', (e) => {
                    const searchTerm = e.target.value.toLowerCase();
                    const filteredFavorites = favorites.filter(item =>
                        item.title.toLowerCase().includes(searchTerm)
                    );
                    renderFavorites(filteredFavorites);
                });

                // æ’åºåŠŸèƒ½
                const sortSelect = document.getElementById('sortFavorites');
                sortSelect.addEventListener('change', (e) => {
                    const sortedFavorites = [...favorites].sort((a, b) => {
                        const dateA = new Date(a.date);
                        const dateB = new Date(b.date);
                        return e.target.value === 'newest' ?
                            dateB - dateA : dateA - dateB;
                    });
                    renderFavorites(sortedFavorites);
                });
            }

            // ä¸‹è½½æ”¶è—çš„è§†é¢‘
            function downloadFavorite(url) {
                window.open(url, '_blank');
                showNotification('è¯·åœ¨æ–°çª—å£ä¸­å³é”®ä¿å­˜è§†é¢‘');
            }

            // è·å–ç›¸å¯¹æ—¶é—´
            function getTimeAgo(date) {
                const now = new Date();
                const diffInSeconds = Math.floor((now - date) / 1000);

                if (diffInSeconds < 60) return 'åˆšåˆš';
                if (diffInSeconds < 3600) return Math.floor(diffInSeconds / 60) + 'åˆ†é’Ÿå‰';
                if (diffInSeconds < 86400) return Math.floor(diffInSeconds / 3600) + 'å°æ—¶å‰';
                if (diffInSeconds < 2592000) return Math.floor(diffInSeconds / 86400) + 'å¤©å‰';
                if (diffInSeconds < 31536000) return Math.floor(diffInSeconds / 2592000) + 'ä¸ªæœˆå‰';
                return Math.floor(diffInSeconds / 31536000) + 'å¹´å‰';
            }

            // æ·»åŠ æ”¶è—æ ·å¼
            const style = document.createElement('style');
            style.textContent = `
            .favorite-item {
                background: rgba(255, 255, 255, 0.1);
                margin: 8px;
                padding: 12px;
                border-radius: 10px;
                color: white;
                display: flex;
                align-items: center;
                transition: all 0.3s ease;
            }
            
            .favorite-item:hover {
                background: rgba(255, 255, 255, 0.15);
                transform: translateX(5px);
            }

            .favorite-title {
                font-size: 12px;
                margin-right: 10px;
                white-space: nowrap;
                overflow: hidden;
                text-overflow: ellipsis;
            }

            .favorite-buttons button:hover {
                opacity: 0.8;
                transform: scale(1.1);
            }

            #favoriteItemsContainer::-webkit-scrollbar {
                width: 5px;
            }

            #favoriteItemsContainer::-webkit-scrollbar-track {
                background: rgba(255, 255, 255, 0.1);
                border-radius: 5px;
            }

            #favoriteItemsContainer::-webkit-scrollbar-thumb {
                background: rgba(255, 255, 255, 0.3);
                border-radius: 5px;
            }

            #favoriteItemsContainer::-webkit-scrollbar-thumb:hover {
                background: rgba(255, 255, 255, 0.5);
            }
        `;
            document.head.appendChild(style);

            function switchToRandom() {
                document.getElementById('randomVideoBtn').classList.add('active');
                document.getElementById('showFavoriteListBtn').classList.remove('active');
                favoriteList.classList.remove('show');
                showNotification('åˆ‡æ¢åˆ°éšæœºè§†é¢‘æ¨¡å¼');
                location.reload(); // åªåœ¨åˆ‡æ¢åˆ°éšæœºè§†é¢‘æ—¶åˆ·æ–°é¡µé¢
            }

            function switchToFavorites() {
                document.getElementById('randomVideoBtn').classList.remove('active');
                document.getElementById('showFavoriteListBtn').classList.add('active');
                favoriteList.classList.add('show');
                updateFavoriteList();
                showNotification('æ‰“å¼€æ”¶è—åˆ—è¡¨');
                // ç§»é™¤é¡µé¢åˆ·æ–°
            }

            document.getElementById('downloadSideButton').onclick = () => {
                // è·å–å½“å‰æ­£åœ¨æ’­æ”¾çš„è§†é¢‘å…ƒç´ 
                const videoElement = document.querySelector('video');

                if (videoElement && videoElement.src) {
                    // è·å–è§†é¢‘çš„URL
                    const videoUrl = videoElement.src;

                    // ç›´æ¥åœ¨æ–°çª—å£æ‰“å¼€è§†é¢‘é“¾æ¥
                    window.open(videoUrl, '_blank');

                    showNotification('è¯·åœ¨æ–°çª—å£ä¸­å³é”®ä¿å­˜è§†é¢‘');
                } else {
                    showNotification('æœªæ‰¾åˆ°å¯ä¸‹è½½çš„è§†é¢‘');
                }
            };

            // æ’­æ”¾æ”¶è—çš„è§†é¢‘
            function playFavorite(url) {
                player.src = url;
                currentVideoURL = url;
                player.play();
                favoriteList.classList.remove('show');
                showNotification('æ­£åœ¨æ’­æ”¾æ”¶è—çš„è§†é¢‘ï¼');
                checkFavoriteStatus();
            }

            // åˆ é™¤æ”¶è—
            function removeFavorite(index) {
                favorites.splice(index, 1);
                localStorage.setItem('videoFavorites', JSON.stringify(favorites));
                updateFavoriteList();
                checkFavoriteStatus();
                showNotification('å·²ä»æ”¶è—ä¸­ç§»é™¤ï¼');
            }

            // æ¸…ç©ºæ‰€æœ‰æ”¶è—
            function clearAllFavorites() {
                if (favorites.length === 0) {
                    showNotification('æ”¶è—åˆ—è¡¨å·²ç»æ˜¯ç©ºçš„äº†ï¼');
                    return;
                }

                if (confirm('ç¡®å®šè¦æ¸…ç©ºæ‰€æœ‰æ”¶è—å—ï¼Ÿæ­¤æ“ä½œä¸å¯æ¢å¤ï¼')) {
                    favorites = [];
                    localStorage.setItem('videoFavorites', JSON.stringify(favorites));
                    updateFavoriteList();
                    checkFavoriteStatus();
                    showNotification('å·²æ¸…ç©ºæ‰€æœ‰æ”¶è—ï¼');
                }
            }

            // ç‚¹å‡»æ”¶è—åˆ—è¡¨å¤–éƒ¨å…³é—­åˆ—è¡¨
            document.addEventListener('click', (e) => {
                // æ£€æŸ¥ç‚¹å‡»çš„å…ƒç´ æ˜¯å¦æ˜¯åˆ é™¤æŒ‰é’®æˆ–å…¶çˆ¶å…ƒç´ 
                const isDeleteAction = e.target.closest('.favorite-buttons') !== null;

                if (!favoriteList.contains(e.target) &&
                    !showFavoriteListBtn.contains(e.target) &&
                    !isDeleteAction &&
                    favoriteList.classList.contains('show')) {
                    favoriteList.classList.remove('show');
                    // åˆ‡æ¢å›éšæœºè§†é¢‘çš„æ¿€æ´»çŠ¶æ€
                    document.getElementById('randomVideoBtn').classList.add('active');
                    document.getElementById('showFavoriteListBtn').classList.remove('active');
                }
            });

            // ä¿®æ”¹ loadVideo å‡½æ•°ï¼Œæ·»åŠ æ£€æŸ¥æ”¶è—çŠ¶æ€
            const originalLoadVideo = loadVideo;
            loadVideo = function (api) {
                originalLoadVideo(api);
                // å»¶è¿Ÿæ£€æŸ¥æ”¶è—çŠ¶æ€ï¼Œç¡®ä¿è§†é¢‘å·²åŠ è½½
                setTimeout(checkFavoriteStatus, 1000);
            }

            // åˆå§‹åŒ–æ”¶è—æŒ‰é’®ç‚¹å‡»äº‹ä»¶
            document.getElementById('favoriteButton').onclick = handleFavorite;

            // åˆå§‹åŒ–æ—¶æ£€æŸ¥æ”¶è—çŠ¶æ€
            setTimeout(checkFavoriteStatus, 1000);

            // æ·»åŠ åŠ¨ç”»æ ·å¼
            const styleSheet = document.createElement('style');
            styleSheet.textContent = `
            @keyframes starScatter {
                0% {
                    opacity: 1;
                    transform: translate(-50%, -50%) scale(1) rotate(0deg);
                }
                50% {
                    opacity: 0.6;
                    transform: translate(calc(-50% + var(--tx) * 0.5), calc(-50% + var(--ty) * 0.5)) scale(0.6) rotate(180deg);
                }
                100% {
                    opacity: 0;
                    transform: translate(calc(-50% + var(--tx)), calc(-50% + var(--ty))) scale(0) rotate(360deg);
                }
            }

            @keyframes starGather {
                0% {
                    opacity: 0;
                    transform: translate(calc(-50% + var(--tx)), calc(-50% + var(--ty))) scale(0) rotate(0deg);
                }
                50% {
                    opacity: 0.6;
                    transform: translate(calc(-50% + var(--tx) * 0.5), calc(-50% + var(--ty) * 0.5)) scale(0.6) rotate(180deg);
                }
                100% {
                    opacity: 1;
                    transform: translate(-50%, -50%) scale(1) rotate(360deg);
                }
            }

            .likeEffect {
                position: fixed;
                pointer-events: none;
                z-index: 9999;
                transform-origin: center center;
                transition: all 0.3s ease;
            }

            .likeEffect svg {
                width: 35px;
                height: 35px;
                fill: #ffd700;
                filter: drop-shadow(0 0 8px rgba(255, 215, 0, 0.8));
                position: absolute;
                left: 50%;
                top: 50%;
                transform: translate(-50%, -50%);
                will-change: transform, opacity;
            }

            .likeEffect > div {
                position: absolute;
                width: 100%;
                height: 100%;
                left: 0;
                top: 0;
                transform-origin: center center;
            }

            .likeEffect.scatter .star-1,
            .likeEffect.scatter .star-2,
            .likeEffect.scatter .star-3,
            .likeEffect.scatter .star-4,
            .likeEffect.scatter .star-5,
            .likeEffect.scatter .star-6,
            .likeEffect.scatter .star-7,
            .likeEffect.scatter .star-8 {
                animation: starScatter 1s cubic-bezier(0.34, 1.56, 0.64, 1) forwards;
            }

            .likeEffect.gather .star-1,
            .likeEffect.gather .star-2,
            .likeEffect.gather .star-3,
            .likeEffect.gather .star-4,
            .likeEffect.gather .star-5,
            .likeEffect.gather .star-6,
            .likeEffect.gather .star-7,
            .likeEffect.gather .star-8 {
                animation: starGather 1s cubic-bezier(0.34, 1.56, 0.64, 1) forwards;
            }

            .likeEffect.scatter .star-1 { animation-delay: 0s; }
            .likeEffect.scatter .star-2 { animation-delay: 0.08s; }
            .likeEffect.scatter .star-3 { animation-delay: 0.16s; }
            .likeEffect.scatter .star-4 { animation-delay: 0.24s; }
            .likeEffect.scatter .star-5 { animation-delay: 0.32s; }
            .likeEffect.scatter .star-6 { animation-delay: 0.40s; }
            .likeEffect.scatter .star-7 { animation-delay: 0.48s; }
            .likeEffect.scatter .star-8 { animation-delay: 0.56s; }

            .likeEffect.gather .star-1 { animation-delay: 0.56s; }
            .likeEffect.gather .star-2 { animation-delay: 0.48s; }
            .likeEffect.gather .star-3 { animation-delay: 0.40s; }
            .likeEffect.gather .star-4 { animation-delay: 0.32s; }
            .likeEffect.gather .star-5 { animation-delay: 0.24s; }
            .likeEffect.gather .star-6 { animation-delay: 0.16s; }
            .likeEffect.gather .star-7 { animation-delay: 0.08s; }
            .likeEffect.gather .star-8 { animation-delay: 0s; }
        `;
            document.head.appendChild(styleSheet);

            function toggleVideoTypePopup() {
                const videoTypePopup = document.getElementById('videoTypePopup');
                videoTypePopup.classList.toggle('show');
            }

            // ç‚¹å‡»å¼¹çª—å¤–éƒ¨å…³é—­å¼¹çª—
            videoTypePopup.addEventListener('click', function (e) {
                if (e.target === videoTypePopup) {
                    toggleVideoTypePopup();
                }
            });

            // ä¸»é¢˜åˆ‡æ¢é€»è¾‘
            const themeToggle = document.getElementById('themeToggle');
            let currentTheme = 'default'; // é»˜è®¤ä¸»é¢˜

            themeToggle.onclick = () => {
                if (currentTheme === 'default') {
                    currentTheme = 'pink';
                    themeToggle.innerText = 'ä¸»é¢˜ï¼šç²‰è‰²';
                } else if (currentTheme === 'pink') {
                    currentTheme = 'cyan';
                    themeToggle.innerText = 'ä¸»é¢˜ï¼šé’è‰²';
                } else {
                    currentTheme = 'default';
                    themeToggle.innerText = 'ä¸»é¢˜ï¼šé»˜è®¤';
                }
                updateTheme();
            };

            function updateTheme() {
                // ç§»é™¤æ‰€æœ‰ä¸»é¢˜ç±»å
                document.body.classList.remove('default', 'pink', 'cyan');
                // æ·»åŠ å½“å‰ä¸»é¢˜ç±»å
                document.body.classList.add(currentTheme);

                // æ›´æ–°è¿›åº¦æ¡é¢œè‰²
                const progressBar = document.getElementById('progressBar');
                if (currentTheme === 'pink') {
                    progressBar.style.backgroundColor = 'var(--progress-bar-color-pink)';
                } else if (currentTheme === 'cyan') {
                    progressBar.style.backgroundColor = 'var(--progress-bar-color-cyan)';
                } else {
                    progressBar.style.backgroundColor = 'var(--progress-bar-color-default)';
                }
            }

            // é¡µé¢åŠ è½½æ—¶åˆå§‹åŒ–é»˜è®¤ä¸»é¢˜
            document.addEventListener('DOMContentLoaded', () => {
                updateTheme();
                loadVideo(currentAPI); // æ·»åŠ æ­¤è¡Œä»¥åœ¨é¡µé¢åŠ è½½æ—¶åŠ è½½è§†é¢‘
            });

            // æ·»åŠ æ ·å¼ä»¥æ”¯æŒä¸»é¢˜åˆ‡æ¢
            if (!document.getElementById('themeStyles')) {
                const styleSheet = document.createElement('style');
                styleSheet.id = 'themeStyles';
                styleSheet.textContent = `
        /* å…¨å±€å˜é‡å®šä¹‰ */
        :root {
            --text-color-default: white;
            --icon-color-default: white; /* é»˜è®¤å›¾æ ‡é¢œè‰² */
            --background-color-default: white;

            --text-color-pink: #ff69b4;
            --icon-color-pink: #ff69b4; /* ç²‰è‰²ä¸»é¢˜å›¾æ ‡é¢œè‰² */
            --background-color-pink: #ffe6f2;

            --text-color-cyan: #00bcd4;
            --icon-color-cyan: #00bcd4; /* é’è‰²ä¸»é¢˜å›¾æ ‡é¢œè‰² */
            --background-color-cyan: #e0f7fa;
        }

        /* é»˜è®¤ä¸»é¢˜æ ·å¼ */
        body.default {
            --text-color: var(--text-color-default);
            --icon-color: var(--icon-color-default);
            --background-color: var(--background-color-default);
        }

        /* ç²‰è‰²ä¸»é¢˜æ ·å¼ */
        body.pink {
            --text-color: var(--text-color-pink);
            --icon-color: var(--icon-color-pink);
            --background-color: var(--background-color-pink);
        }

        /* é’è‰²ä¸»é¢˜æ ·å¼ */
        body.cyan {
            --text-color: var(--text-color-cyan);
            --icon-color: var(--icon-color-cyan);
            --background-color: var(--background-color-cyan);
        }

        /* åº”ç”¨å…¨å±€å˜é‡ */
        body {
            color: var(--text-color); /* å…¨å±€æ–‡å­—é¢œè‰² */
            background-color: var(--background-color); /* å…¨å±€èƒŒæ™¯è‰² */
        }

        svg path, svg text {
            fill: var(--icon-color); /* å›¾æ ‡é¢œè‰² */
        }

        button, .typeButton {
            color: var(--text-color); /* æŒ‰é’®æ–‡å­—é¢œè‰² */
            border-color: var(--text-color); /* æŒ‰é’®è¾¹æ¡†é¢œè‰² */
        }

        /* ç¤ºä¾‹é“¾æ¥çš„é¢œè‰² */
        a {
            color: var(--text-color);
            text-decoration: none;
        }
        a:hover {
            color: var(--icon-color);
        }
    `;
                document.head.appendChild(styleSheet);
            }

            // å¹¿å‘Šé…ç½®
            const adConfigs = [
                {
                    imageUrl: "https://s3.bmp.ovh/imgs/2024/09/08/1e157341b7c62420.jpg",
                    link: "https://s3.bmp.ovh/imgs/2024/09/08/1e157341b7c62420.jpg",
                    countdown: 3, // å€’è®¡æ—¶ç§’æ•°
                    message: "ç‚¹å‡»è¿™é‡Œäº†è§£æ›´å¤šä¿¡æ¯ï¼"
                },
                {
                    imageUrl: "https://example.com/new-ad-image.jpg", // æ–°å¹¿å‘Šçš„å›¾ç‰‡URL
                    link: "https://example.com/new-ad-link", // æ–°å¹¿å‘Šçš„é“¾æ¥
                    countdown: 5, // æ–°å¹¿å‘Šçš„å€’è®¡æ—¶ç§’æ•°
                    message: "æŸ¥çœ‹æˆ‘ä»¬çš„æ–°äº§å“ï¼" // æ–°å¹¿å‘Šçš„æ¶ˆæ¯
                },
                {
                    imageUrl: "https://s3.bmp.ovh/imgs/2025/01/09/97585298ae433845.jpg", // ç¬¬ä¸‰ä¸ªå¹¿å‘Šçš„å›¾ç‰‡URL
                    link: "https://example.com/ad3", // ç¬¬ä¸‰ä¸ªå¹¿å‘Šçš„é“¾æ¥
                    countdown: 4, // ç¬¬ä¸‰ä¸ªå¹¿å‘Šçš„å€’è®¡æ—¶ç§’æ•°
                    message: "ä¸è¦é”™è¿‡æˆ‘ä»¬çš„ç‰¹åˆ«ä¼˜æƒ ï¼" // ç¬¬ä¸‰ä¸ªå¹¿å‘Šçš„æ¶ˆæ¯
                },
                {
                    imageUrl: "https://example.com/ad4.jpg", // ç¬¬å››ä¸ªå¹¿å‘Šçš„å›¾ç‰‡URL
                    link: "https://example.com/ad4", // ç¬¬å››ä¸ªå¹¿å‘Šçš„é“¾æ¥
                    countdown: 6, // ç¬¬å››ä¸ªå¹¿å‘Šçš„å€’è®¡æ—¶ç§’æ•°
                    message: "ç«‹å³æ³¨å†Œï¼Œè·å–ç‹¬å®¶å†…å®¹ï¼" // ç¬¬å››ä¸ªå¹¿å‘Šçš„æ¶ˆæ¯
                },
                {
                    imageUrl: "https://example.com/ad5.jpg", // ç¬¬äº”ä¸ªå¹¿å‘Šçš„å›¾ç‰‡URL
                    link: "https://example.com/ad5", // ç¬¬äº”ä¸ªå¹¿å‘Šçš„é“¾æ¥
                    countdown: 3, // ç¬¬äº”ä¸ªå¹¿å‘Šçš„å€’è®¡æ—¶ç§’æ•°
                    message: "åŠ å…¥æˆ‘ä»¬çš„ç¤¾åŒºï¼Œäº«å—æ›´å¤šç¦åˆ©ï¼" // ç¬¬äº”ä¸ªå¹¿å‘Šçš„æ¶ˆæ¯
                }
            ];

            let currentAdIndex = 0; // å½“å‰å¹¿å‘Šç´¢å¼•

            let isAdVisible = false; // æ·»åŠ ä¸€ä¸ªæ ‡å¿—æ¥è·Ÿè¸ªå¹¿å‘Šæ˜¯å¦å¯è§

            // æ˜¾ç¤ºå¹¿å‘Šå¼¹çª—çš„å‡½æ•°
            function showAdPopup() {
                if (isAdVisible) return; // å¦‚æœå¹¿å‘Šå·²ç»å¯è§ï¼Œåˆ™ä¸å†æ˜¾ç¤º

                isAdVisible = true; // è®¾ç½®å¹¿å‘Šä¸ºå¯è§
                const randomIndex = Math.floor(Math.random() * adConfigs.length); // éšæœºé€‰æ‹©å¹¿å‘Šç´¢å¼•
                const adConfig = adConfigs[randomIndex]; // è·å–éšæœºå¹¿å‘Šé…ç½®
                const adPopup = document.getElementById('adPopup');
                const closeAdPopup = document.getElementById('closeAdPopup');
                const notificationButton = document.getElementById('notificationButton');

                adPopup.classList.add('show'); // æ·»åŠ æ˜¾ç¤ºç±»ä»¥è§¦å‘åŠ¨ç”»
                closeAdPopup.textContent = adConfig.countdown; // è®¾ç½®åˆå§‹å€’è®¡æ—¶æ–‡æœ¬
                notificationButton.textContent = `å¹¿å‘Šåœ¨${adConfig.countdown}ç§’åå¯å…³é—­`; // æ›´æ–°é€šçŸ¥æŒ‰é’®æ–‡æœ¬

                let countdown = adConfig.countdown;
                const adTimer = setInterval(() => {
                    countdown--;
                    closeAdPopup.textContent = countdown; // æ›´æ–°æŒ‰é’®æ–‡æœ¬ä¸ºå½“å‰å€’è®¡æ—¶
                    notificationButton.textContent = `å¹¿å‘Šåœ¨${countdown}ç§’åå¯å…³é—­`; // æ›´æ–°é€šçŸ¥æŒ‰é’®æ–‡æœ¬
                    if (countdown <= 0) {
                        clearInterval(adTimer);
                        closeAdPopup.textContent = 'Ã—'; // å€’è®¡æ—¶ç»“æŸåæ˜¾ç¤ºå…³é—­æŒ‰é’®
                        updateNotification('å¹¿å‘Šå·²æ˜¾ç¤ºï¼Œè¯·ç‚¹å‡»å…³é—­æŒ‰é’®ã€‚'); // æ›´æ–°é€šçŸ¥
                    }
                }, 1000);

                // è®¾ç½®å¹¿å‘Šå†…å®¹
                document.querySelector('.ad-image').src = adConfig.imageUrl;
                document.querySelector('.ad-content p a').href = adConfig.link;
                document.querySelector('.ad-content p').textContent = adConfig.message;

                closeAdPopup.onclick = function () {
                    adPopup.classList.remove('show');
                    clearInterval(adTimer);
                    isAdVisible = false; // å¹¿å‘Šå…³é—­æ—¶é‡ç½®æ ‡å¿—
                    updateNotification('å¹¿å‘Šå·²å…³é—­ã€‚');
                };
            }
        </script>

</body>

</html>
