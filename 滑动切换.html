<!DOCTYPE html>
<html lang="zh-CN">

<head>
    <title>赏颜悦色</title>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, minimum-scale=1, maximum-scale=1" />
</head>

<body>

    <section id="main" style="padding: 20px;">
        <video id="player" controls="controls" muted autoplay></video> <!-- 添加了muted和autoplay属性 -->
    </section>

    <div style="text-align: center; bottom: 100px; width: 100%;margin-bottom: 25px;">
        <section id="buttons">
            <button id="fullscreen">全屏</button>
            <button id="next1">下一个</button>
            <button id="apiToggle">甜妹</button>
        </section>
    </div>
    <p style="text-align: center; color: #000000f4;">
        <a id="autoPlayToggle" style="margin-right: 90px; display: inline-block;">连播: 开</a> <!-- 自动连播按钮 -->
        <a id="muteToggle" style="display: inline-block;">静音: 开</a> <!-- 静音按钮 -->
    </p>

    <p style="text-align: center; color: #a3bef6f4;">© 山雾秋</p>
    <script>
        var player = document.getElementById('player');
        var nextButton = document.getElementById('next1');
        var autoPlayToggle = document.getElementById('autoPlayToggle');
        var muteToggle = document.getElementById('muteToggle');
        var currentAPI = 'http://api.yujn.cn/api/tianmei.php?type=video';
        var api1 = 'http://api.yujn.cn/api/tianmei.php?type=video';
        var api2 = 'https://tucdn.wpon.cn/api-girl/index.php?wpon=302';
        var api3 = 'http://api.yujn.cn/api/wmsc.php?type=video';
        var auto = true; // 自动连播初始值为开
        var hasStarted = false; // 判断视频是否已经开始播放

        // 切换API并播放视频
        const randomm = function () {
            player.src = currentAPI + '&t=' + Math.random();
            player.play();
        }

        // 当点击开始按钮时，只播放视频，不切换到下一个视频
        nextButton.addEventListener('click', function () {
            if (!hasStarted) {
                randomm();
                nextButton.innerText = '下一个'; // 修改按钮文字为“下一个”
                hasStarted = true; // 标记视频已经开始
            } else {
                randomm(); // 当视频已开始时，切换到下一个视频
            }
        });

        window.onload = function () {
            currentAPI = api1;
            randomm(); // 自动加载并播放视频
        };

        // 切换API的按钮
        document.getElementById('apiToggle').addEventListener('click', function () {
            if (currentAPI === api1) {
                currentAPI = api2;
                this.innerText = '反差';
            } else if (currentAPI === api2) {
                currentAPI = api3;
                this.innerText = '甜妹';
            } else {
                currentAPI = api1;
                this.innerText = '激情';
            }
            randomm();
        });

        // 静音按钮功能
        muteToggle.addEventListener('click', function () {
            player.muted = !player.muted; // 切换静音状态
            muteToggle.innerText = '静音: ' + (player.muted ? '开' : '关');
        });

        // 全屏功能
        document.getElementById('fullscreen').addEventListener('click', function () {
            if (player.requestFullscreen) {
                player.requestFullscreen();
            } else if (player.mozRequestFullScreen) { // Firefox
                player.mozRequestFullScreen();
            } else if (player.webkitRequestFullscreen) { // Chrome, Safari and Opera
                player.webkitRequestFullscreen();
            } else if (player.msRequestFullscreen) { // IE/Edge
                player.msRequestFullscreen();
            }
        });

        // 自动连播开关
        autoPlayToggle.addEventListener('click', function () {
            auto = !auto; // 切换自动连播状态
            autoPlayToggle.innerText = '连播: ' + (auto ? '开' : '关');
        });

        // 监听视频结束时自动播放下一个
        player.addEventListener('ended', function () {
            if (auto) randomm(); // 如果自动连播开关为开，播放下一个视频
        });

        // 触摸事件处理，用于检测滑动方向
        var touchStartY = 0;
        var touchEndY = 0;

        player.addEventListener('touchstart', function (e) {
            touchStartY = e.changedTouches[0].screenY;
        });

        player.addEventListener('touchmove', function (e) {
            touchEndY = e.changedTouches[0].screenY;
        });

        player.addEventListener('touchend', function () {
            if (document.fullscreenElement || document.webkitFullscreenElement) { // 检查是否在全屏模式
                if (touchStartY - touchEndY > 50) {
                    // 向上滑动，播放下一个视频
                    randomm();
                } else if (touchEndY - touchStartY > 50) {
                    // 向下滑动，播放上一个视频（如果有上一个视频的功能）
                    randomm(); // 这里你可以替换为播放上一个视频的功能
                }
            }
        });

    </script>

    <style>
        body {
            font-family: "Helvetica Neue", "PingFang SC", "Microsoft YaHei", Arial, sans-serif;
            margin: 0;
            background-image: linear-gradient(135deg, #233ca18f 100%, #9f31ee7b 100%),
                url('bg.jpg');
            background-size: 800px 800px;
        }

        #main {
            display: flex;
            justify-content: center;
        }

        #player {
            width: auto;
            max-width: 100%;
            height: 530px;
            border-radius: 1rem;
            box-shadow: 0 0 1rem rgba(53, 169, 204, 0.5);
        }

        #buttons button {
            background: linear-gradient(-20deg, #5d70eb98 0%, #78bcec9c 100%);
            color: #fdfefff6;
            line-height: 40px;
            text-align: center;
            width: 80px;
            border: none;
            margin: 0 6px;
            border-radius: 45px;
            font-weight: bold;
            cursor: pointer;
        }
    </style>
</body>

</html>